# Mock WebSocket Demo Project

این پروژه یک نمونه ساده است که در آن یک **وب‌سوکت سرور ماک‌شده (Mocked WebSocket Server)** پیاده‌سازی شده و در سمت کلاینت کار می‌کند. هدف اصلی این پروژه، شبیه‌سازی یک سرور واقعی وب‌سوکت و مدیریت همزمان داده‌ها بین تب‌های مختلف مرورگر است.

## سیستم کارکرد

ایده کلی پروژه به این شکل است که وقتی کاربر وارد سایت می‌شود:

1. **وب‌سوکت سرور ماک‌شده** (با استفاده از کتابخانه [mock-socket](https://github.com/thoov/mock-socket)) به صورت خودکار راه‌اندازی می‌شود.

2. داده‌ها ابتدا از **LocalStorage** مرورگر خوانده می‌شوند. اگر داده‌ای وجود نداشته باشد، از یک دیتای اولیه (initial data) استفاده شده و سپس در LocalStorage ذخیره می‌شود.

3. بعد از روشن شدن سرور، اولین پیام با نوع `sync` از سمت سرور ارسال می‌شود. این پیام شامل داده‌های اولیه است که وارد **Redux Store** می‌شوند.

4. این فرآیند توسط یک هوک سفارشی به نام `useWebSocket` انجام می‌شود. این هوک:
    - فعال بودن سرور را بررسی می‌کند.
    - در صورت فعال بودن، یک اتصال WebSocket با سرور ماک برقرار می‌کند.
    - پیام‌های دریافتی (مثل `sync`) را مدیریت کرده و داده‌ها را در Redux Store ذخیره می‌کند.

برای هماهنگی بین تب‌های مختلف مرورگر، از **BroadcastChannel API** استفاده شده است. به این ترتیب، وقتی داده‌ها در یک تب تغییر کنند (چه در سمت کلاینت و چه سرور ماک)، همان تغییرات به تب‌های دیگر هم منتقل می‌شود و همه چیز به‌روز می‌ماند.

## تکنولوژی‌های استفاده‌شده

-   [Next.js](https://nextjs.org/) – فریم‌ورک React برای ساخت اپلیکیشن سمت کلاینت و سرور
-   [Tailwind CSS](https://tailwindcss.com/) – استایل‌دهی سریع و ماژولار
-   [TypeScript](https://www.typescriptlang.org/) – تایپ‌سیستم برای کدنویسی مطمئن‌تر
-   [Redux Toolkit](https://redux-toolkit.js.org/) – مدیریت State مرکزی پروژه
-   [uuid](https://github.com/uuidjs/uuid) – تولید شناسه‌های یکتا برای داده‌ها
-   [mock-socket](https://github.com/thoov/mock-socket) – شبیه‌سازی سرور وب‌سوکت سمت کلاینت

## صفحات پروژه

-   `/` : صفحه اصلی (Root)
    -   در این صفحه داده‌های موجود نمایش داده می‌شوند.
-   `/admin` : صفحه مدیریت
    -   این بخش بدون **Authentication/Login** طراحی شده است.
    -   در اینجا امکان **ویرایش اطلاعات محصولات** وجود دارد.

## دیپلوی

این پروژه روی [Vercel](https://vercel.com/) دیپلوی شده و به راحتی قابل مشاهده و تست است.

## نصب و اجرا

برای راه‌اندازی پروژه مراحل زیر را انجام دهید:

1. ابتدا ریپازیتوری را کلون کنید
2. پکیج‌های موردنیاز را نصب کنید:
    ```bash
    npm install
    ```

### اجرای پروژه در حالت Development

برای اجرای پروژه در حالت توسعه، دستور زیر را بزنید:

```bash
npm run dev
```

سپس پروژه روی آدرس زیر در دسترس خواهد بود:

```
http://localhost:3000
```

### اجرای پروژه در حالت Production

برای ساخت و اجرای پروژه در حالت Production مراحل زیر را انجام دهید:

1.  ابتدا پروژه را build کنید:
    ```bash
    npm run build
    ```
2.  سپس پروژه را اجرا کنید:
    `bash
npm run start
`
    به صورت پیش‌فرض پروژه روی پورت `3000` اجرا خواهد شد:

```
http://localhost:3000
```

> ⚡️ توجه: برای اجرای این پروژه نیاز به هیچ سرور خارجی ندارید، چون وب‌سوکت سرور به صورت ماک در سمت کلاینت پیاده‌سازی شده است.
